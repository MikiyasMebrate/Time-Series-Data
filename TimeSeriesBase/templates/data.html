{% load static %}
<!DOCTYPE html>
<html>
  <head>
    <title>MoPD Analysis tool</title>
    
    {% include 'includes/head.html'%}
<!-- Include jQuery library -->
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>

<!-- Include jQuery UI library -->
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script>

</head>

  <body>
    {% include 'includes/navbar.html'%}
    <section class='pt-5 mt-5'>
    <div class="container-fluid mt-3">
      <h2 class='text-center'>Ethiopia Development Indicator</h2>
      <hr class="divider">
      <div class="row">
          <div class="col-md-4 col-sm-6 col-lg-4" id="filterColumn">
              <h4 class="ms-1">Indicator Variables</h4>
              <hr class="dropdown-divider">
              <div class="accordion collapsed mt-3" id="accordionExample">
                <div class="accordion-item">
                    <h2 class="accordion-header" id="databaseHeader">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                            data-bs-target="#databaseOptions" aria-expanded="false" aria-controls="databaseOptions">
                            <span class="d-flex align-items-center w-100">
                                <strong class="me-auto">Topic</strong>
                                <span class="d-flex align-items-center">
                                    <span class="fw-bold">Available</span>
                                    <span class="badge rounded-pill  ms-1" style='background-color:#009b77;' id="databaseAvailableBadge">0</span>
                                    <span class="ps-1 pe-1 bar"></span>
                                    <span class="ms-2 fw-bold">Selected</span>
                                    <span class="badge rounded-pill ms-1 me-2" style='background-color:#009b77;' id="databaseSelectedBadge">0</span>
                                </span>
                            </span>
                        </button>
                    </h2>

                    <div id="databaseOptions" class="accordion-collapse collapse" aria-labelledby="databaseHeader"
                        data-bs-parent="#accordionExample">
                        <!-- Add these buttons for A-Z and Z-A sorting -->
                          <div id="accessibility" class="d-flex row mt-2 ms-1">
                                <div class="col-md-8">
                                    <input type="text" class="form-control h-100" id="filterDatabaseSearch" placeholder="Search...">
                                </div>
                                <div class="col-md-4">
                                    <button class="btn text-white btn-sm"  style='background-color:#009b77;' id="sortAZDatabase">A-Z</button>
                                    <button class="btn text-white btn-sm " style='background-color:#009b77;'  id="sortZADatabase">Z-A</button>
                                </div>
                          </div>                           
                        <div class="accordion-body scrollable" id='topic_list_filter'>
                            <!-- Add more options here -->
                            <p class="text-danger">Please Select Topic</p>
                        </div>
                    </div>

                </div>
            
                <div class="accordion-item">
                    <h2 class="accordion-header" id="categoryHeader">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                            data-bs-target="#categoryOptions" aria-expanded="false" aria-controls="categoryOptions">

                            <span class="d-flex align-items-center w-100">
                                <strong class="me-auto">Category</strong>
                                <span class="d-flex align-items-center">
                                    <span class="fw-bold">Available</span>
                                    <span class="badge rounded-pill ms-1" style='background-color:#009b77;' id="categoryAvailableBadge">0</span>
                                    <span class="ps-1 pe-1 bar"></span>
                                    <span class="ms-2 fw-bold">Selected</span>
                                    <span class="badge rounded-pill ms-1 me-2" style='background-color:#009b77;' id="categorySelectedBadge">0</span>
                                </span>
                            </span>

                        </button>
                    </h2>

                    <div id="categoryOptions" class="accordion-collapse collapse" aria-labelledby="categoryHeader"
                        data-bs-parent="#accordionExample">
                        <div id="serach_atrr" style="display: none;">  
                            <div class="row d-flex ms-1 mt-2">
                                <div class="col-md-8">                            
                                    <!-- Add these buttons for A-Z and Z-A sorting -->
                                    <input type="text" id="filterSearch" class='form-control h-100' placeholder="Search...">
                               </div>
                                <div class="col-md-4">
                                    <button class="btn text-white btn-sm " style='background-color:#009b77;' id="sortAZ">A-Z</button>
                                    <button class="btn text-white btn-sm " style='background-color:#009b77;' id="sortZA">Z-A</button> 
                                </div>      
                            </div>                 
                        </div>
                        <div class="accordion-body scrollable" id='category_list_filter'>
                            <p class="text-danger">Please Select Topic</p>
                        </div>
                    </div>

                </div>
            
                <div class="accordion-item">
                    <h2 class="accordion-header" id="seriesHeader">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                            data-bs-target="#seriesOptions" aria-expanded="false" aria-controls="seriesOptions">
                            <span class="d-flex align-items-center w-100">
                                <strong class="me-auto">Indicator</strong>
                                <span class="d-flex align-items-center">
                                    <span class="fw-bold">Available</span>
                                    <span class="badge rounded-pill ms-1" style='background-color:#009b77;' id="seriesAvailableBadge">0</span>
                                    <span class="ps-1 pe-1 bar"></span>
                                    <span class="ms-2 fw-bold">Selected</span>
                                    <span class="badge rounded-pill ms-1 me-2" style='background-color:#009b77;' id="seriesSelectedBadge">0</span>
                                </span>
                            </span>
                        </button>
                    </h2>
                    <div id="seriesOptions" class="accordion-collapse collapse" aria-labelledby="seriesHeader"
                        data-bs-parent="#accordionExample">
                        <!-- Add these buttons for A-Z and Z-A sorting -->
                          <div id="search_attr1" style="display: none;" >
                            <div class="d-flex row mt-2 ms-1" >
                                <div class="col-md-8">
                                    <input type="text" class="form-control h-100" id="filterIndicatorSearch" placeholder="Search...">
                                </div>
                                <div class="col-md-4">
                                    <button class="btn text-white btn-sm"  style='background-color:#009b77;' id="sortAZIndicator">A-Z</button>
                                    <button class="btn text-white btn-sm " style='background-color:#009b77;'  id="sortZAIndicator">Z-A</button>
                                </div>
                            </div>
                          </div>    
                        <div class="accordion-body scrollable indicator_filter">
                            <div id="indicator_list_filter_header">
                                <p class="text-danger">Please Select Categories</p>
                            </div>
                            <div id="indicator_list_filter_select_all"></div>
                            <div id="indicator_list_filter_body"></div>
                        </div>
                    </div>
                </div>
            
                <div class="accordion-item ">
                    <h2 class="accordion-header" id="yearHeader">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                            data-bs-target="#yearOptions" aria-expanded="false" aria-controls="yearOptions">
                            <span class="d-flex align-items-center w-100">
                                <strong class="me-auto">Year</strong>
                                <span class="d-flex align-items-center">
                                    <span class="fw-bold">Available</span>
                                    <span class="badge rounded-pill ms-1" style='background-color:#009b77;' id="yearAvailableBadge">0</span>
                                    <span class="ps-1 pe-1 bar"></span>
                                    <span class="ms-2 fw-bold">Selected</span>
                                    <span class="badge rounded-pill ms-1 me-2" style='background-color:#009b77;' id="yearSelectedBadge">0</span>
                                </span>
                            </span>
                        </button>
                    </h2>
                    <div id="yearOptions" class="accordion-collapse collapse" aria-labelledby="yearHeader"
                        data-bs-parent="#accordionExample">
                        <div class="m-2 pb-5" id="search_attr3" style="display: none;">
                            <input type="text" class="form-control h-100 w-100" id="filterYearSearch" placeholder="Search...">
                            <div class="">
                                <p class="mt-3 ms-1 fw-bold">Select Year by range</p>
                                <div slider id="slider-distance">
                                    <div>
                                        <div inverse-left class='inverse-left' style="width:70%;"></div>
                                        <div inverse-right class='inverse-right' style="width:70%;"></div>
                                        <div range class='range' style="left:0%;right:99%;"></div>
                                        <span thumb class='thumb' style="left:0%;"></span>
                                        <span thumb class='thumb' style="left:1%;"></span>
                                        <div sign class='sign' style="left:0%;">
                                            <span id="value1">0</span>
                                        </div>
                                        <div sign class='sign' style="left:1%;">
                                            <span id="value2">1</span>
                                        </div>
                                    </div>
                                    <input id='in1' type="range" tabindex="0" value="0" max="100" min="0" step="1" oninput="
                                        this.value = Math.min(this.value, this.parentNode.childNodes[5].value - 1);
                                        var value = (100 / (parseInt(this.max) - parseInt(this.min))) * parseInt(this.value) - (100 / (parseInt(this.max) - parseInt(this.min))) * parseInt(this.min);
                                        var children = this.parentNode.childNodes[1].childNodes;
                                        children[1].style.width = value + '%';
                                        children[5].style.left = value + '%';
                                        children[7].style.left = value + '%'; children[11].style.left = value + '%';
                                        children[11].childNodes[1].innerHTML = this.value;
                                        
                                        updateCheckboxes();
                                        updateFilterSelection();" />
                                
                                    <input id='in2' type="range" tabindex="0" value="1" max="100" min="0" step="1" oninput="
                                        this.value = Math.max(this.value, this.parentNode.childNodes[3].value - (-1));
                                        var value = (100 / (parseInt(this.max) - parseInt(this.min))) * parseInt(this.value) - (100 / (parseInt(this.max) - parseInt(this.min))) * parseInt(this.min);
                                        var children = this.parentNode.childNodes[1].childNodes;
                                        children[3].style.width = (100 - value) + '%';
                                        children[5].style.right = (100 - value) + '%';
                                        children[9].style.left = value + '%'; children[13].style.left = value + '%';
                                        children[13].childNodes[1].innerHTML = this.value;

                                        updateCheckboxes();
                                        updateFilterSelection();" />
                                        <div class="selector mt-2 ">
                                        <span id="min-price" class="slider-price">0</span>
                                         <span class="seperator">-</span> 
                                        <span id="max-price" class="slider-price">0 </span>
                                        </div>
                                </div>
                            </div>                            
                        </div>
                        <div class="accordion-body scrollable " id='Year_list_filter'>
                            
                            <p class="text-danger">Please Select Indicator</p>
                        </div>
                    </div>
                </div>
            </div>
          </div> <!-- end of col-md-4 -->

          <div class="col-md-8 col-sm-6 col-lg-8 pb-5 pt-1" id="dataColumn">
              <!-- Add disabled attribute to the display options buttons before the apply button is clicked -->
              <div id="displayOptions" class="d-flex justify-content-between align-items-end mb-2 flex-row-reverse">
                  <div class="d-flex">
                      <a class="btn text-white text-white me-3" style="width: 100px; background-color:#009b77; height: 38px; "><i
                              class="fas fa-table"></i> Table</a>
                      <a class="btn text-white text-white me-3" style="width: 100px; background-color:#009b77; height: 38px; "><i
                              class="fas fa-chart-bar"></i> Chart</a>
                  </div>
                  <div class="form-check form-switch ms-3">
                      <input type="checkbox" class="form-check-input" role="switch" id="toggleButton">
                  </div>
              </div>      
              <!-- Move the data display section below the filter selection card -->
              <div class="card-container" id='checkmark_card'>
                  <div class="card mt-3" style="width:370px;  box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.2);">
                      <div class="card-body ">
                          <div id="filterSelections" class="d-flex flex-column">
                             <p class="text-danger" style="font-size: 15px;" >Please Select the remaining variables to continue.</p>
                             <div class="ps-3 pe-3">
                                <div class="filter-option-selection mb-2">
                                    <span class="filter-option-label fw-bold">Topic:</span>
                                    <span class="filter-option-checkmark" id="boot-icon1" ></span>
                                </div>
                                <div class="filter-option-selection mb-2">
                                    <span class="filter-option-label fw-bold">Category:</span>
                                    <span class="filter-option-checkmark " id="boot-icon2"></span>
                                </div>
                                <div class="filter-option-selection mb-2">
                                    <span class="filter-option-label fw-bold">Indicator:</span>
                                    <span class="filter-option-checkmark" id="boot-icon3"></span>
                                </div>
                                <div class="filter-option-selection mb-2">
                                    <span class="filter-option-label fw-bold">Year:</span>
                                    <span class="filter-option-checkmark" id="boot-icon4"></span>
                                </div>
                             </div>
                          </div>
                          <div class="text-center" id="button">
                                
                          </div>
                      </div>
                  </div>
              </div>
              

              <!-- Add this code to move the data display section below the filter selection card -->
              <div id="dataDisplay" class="data-display container-fluid">
                  <div id="table-container">
                    <!--Data List Start-->
                    <div class="card" id='table_card' style="display: none;">
                            <div class="card-body" id="list_table_view" style="display: none;">
                            </div>
                    </div>
                    <!--Data List End-->
                  </div>
                  <div id="display_chart" class="container">
                        <!-- Add chart here -->
                        <div class="card" id='chart_display' style="display:none;">

                        <div class="card-header">
                            <div class="card-header">
                                <h3 class="card-title d-flex">
                                    <i class="fas fa-chart-pie mr-1"></i>
                                    <p class="fw-bold fs-3 pl-1" id="titleForCatagory"></p>
                                </h3>
                                <div class="card-tools">
                                    <ul class="nav nav-pills ml-auto">
                                        <li class="nav-item">
                                            <a class="nav-link active "  id="bar_btn" href="#bar-chart" data-toggle="tab">Bar</a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link " id='series_btn' href="#series-chart"  data-toggle="tab">Series</a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link" href="#line-chart" id='line_btn' data-toggle="tab">Line</a>
                                        </li>
                                        <li class="nav-item" id='main_area'>
                                            <a class="nav-link" id='area' href="#area-chart"  data-toggle="tab">Area</a>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                
                        <div class="card-body">
                            <div class="tab-content p-0">
                                <label id='select_label' class='text-danger form-label fw-bold' for="indicatorDropdown ">Select Indicator to display indicator data</label>
                                <!--to handle for the first drop down for the yaer -->
                                <select class='form-select indicatorDropdown mb-1' id='drop_first'></select>
                                <!--to handle for the first drop down for the month -->
                                <select class='form-select indicatorDropdown1 mb-1' id='drop_two'></select>
                                <!--to handle for the first drop down for the quarter -->
                                <select class='form-select indicatorDropdown2 mb-1' id='drop_three'></select>
                                <!--to handle for the second drop down for the month -->
                                <select class='form-select datasetDropdown mb-1' id='drop' style='display:none'></select>
                                <!--to handle for the second drop down for the quarter -->
                                <select class='form-select datasetDropdown1 mb-1' id='drop_second' style='display:none'></select>
                                <div class="chart tab-pane active " id="bar-chart" style="position: relative; height: 500px;">
                                    <!--to handle for chart the year -->
                                    <div id="bar-chart-canvas"  style="height: 500px;"></div>
                                    <!--to handle for chart the month -->
                                    <div id="bar-chart-canvas1"  style="height: 500px; display:none;"></div>
                                    <!--to handle for chart the quarter -->
                                    <div id="bar-chart-canvas2"  style="height: 500px; display:none;"></div>
                                </div>
                                <div class="chart tab-pane" id="series-chart" style="position: relative; height: 500px;">
                                    <!--to handle for chart the year -->
                                    <div id="series-chart-canvas" height="300" style="height: 500px;"></div>
                                    <!--to handle for chart the month -->
                                    <div id="series-chart-canvas1" height="300" style="height: 500px; display:none;"></div>
                                    <!--to handle for chart the quarter -->
                                    <div id="series-chart-canvas2" height="300" style="height: 500px; display:none;"></div>
                                </div>
                                <div class="chart tab-pane" id="line-chart" style="position: relative; height: 500px;">
                                    <!--to handle for chart the year -->
                                    <div id="line-chart-canvas"  style="height: 500px;"></div>
                                    <!--to handle for chart the month -->
                                    <div id="line-chart-canvas1"  style="height: 500px; display:none;"></div>
                                    <!--to handle for chart the quarter -->
                                    <div id="line-chart-canvas2"  style="height: 500px; display:none;"></div>
                                </div>
                                <div class="chart tab-pane" id="area-chart" style="position: relative; height: 500px; ">
                                    <figure class="highcharts-figure">
                                        <div id="parent-container">
                                            <div id="play-controls">
                                                <button id="play-pause-button" class="fa fa-play" title="play"></button>
                                                <input id="play-range" type="range" value="" min="" max="" />
                                            </div>
                                            <div id="area-chart-canvas" height="300" style="height: 500px;"></div>
                                        </div>
                                    </figure>
                            
                                </div>
                            </div>
                        </div>
                  </div>
                </div>
              </div>
              
          </div>
      </div>
  </div>
<div>
     {% include "includes/footer.html" %} 
    {% include "includes/footer_js.html" %} 
</div>

<script src="{% static 'assets/js/data_filter.js' %}"></script>
<!-- Button -->
<script src="{% static 'assets/plugins/jquery/jquery.min.js' %}"></script>
<script src="{% static 'assets/plugins/bootstrap/js/bootstrap.bundle.min.js' %}"></script>
<!-- Stock  chart js-->
<script src="https://code.highcharts.com/stock/highstock.js"></script>
<script src="https://code.highcharts.com/stock/modules/exporting.js"></script>
<script src="https://code.highcharts.com/stock/modules/export-data.js"></script>
<script src="https://code.highcharts.com/stock/modules/accessibility.js"></script>


<!-- datatable -->
<script src="{% static 'assets/plugins/datatables/jquery.dataTables.min.js' %}"></script>
<script src="{% static 'assets/plugins/datatables-bs4/js/dataTables.bootstrap4.min.js' %}"></script>
<script src="{% static 'assets/plugins/datatables-buttons/js/dataTables.buttons.min.js' %}"></script>
<script src="{% static 'assets/plugins/datatables-buttons/js/buttons.bootstrap4.min.js' %}"></script>
<script src="{% static 'assets/plugins/jszip/jszip.min.js' %}"></script>
<script src="{% static 'assets/plugins/pdfmake/pdfmake.min.js' %}"></script>
<script src="{% static 'assets/plugins/pdfmake/vfs_fonts.js' %}"></script>
<script src="{% static 'assets/plugins/datatables-buttons/js/buttons.html5.min.js' %}"></script>
<script src="{% static 'assets/plugins/datatables-buttons/js/buttons.print.min.js' %}"></script>
<script src="{% static 'assets/plugins/datatables-buttons/js/buttons.colVis.min.js' %}"></script>

<!-- chart -->
 <script src="https://code.highcharts.com/modules/accessibility.js"></script>
 <script src="https://code.highcharts.com/modules/annotations.js"></script>
 <script src="https://code.highcharts.com/modules/data.js"></script>
 <script src="https://code.highcharts.com/modules/exporting.js"></script>
 <script src="https://code.highcharts.com/modules/export-data.js"></script>
 <script src="https://code.highcharts.com/modules/drilldown.js"></script>
       
  </body>
</html>
